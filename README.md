# Проект «Элементы машинного обучения и анализа данных»

<div align="left">
  <img alt="last-commit" src="https://img.shields.io/github/last-commit/SapKat-BezVol/BottleWebProject_C222_C221K_7_BKSV?style=flat&logo=git&logoColor=white&color=0080ff">
  <img alt="repo-top-language" src="https://img.shields.io/github/languages/top/SapKat-BezVol/BottleWebProject_C222_C221K_7_BKSV?style=flat&color=0080ff">
  <img alt="repo-language-count" src="https://img.shields.io/github/languages/count/SapKat-BezVol/BottleWebProject_C222_C221K_7_BKSV?style=flat&color=0080ff">
  <img alt="repo-license" src="https://img.shields.io/github/license/SapKat-BezVol/BottleWebProject_C222_C221K_7_BKSV">
  <img alt="repo-license" src="https://img.shields.io/github/commit-activity/w/SapKat-BezVol/BottleWebProject_C222_C221K_7_BKSV">
  <br>
  <img alt="scikitlearn" src="https://img.shields.io/badge/scikitlearn-F7931E.svg?style=flat&logo=scikit-learn&logoColor=white">
  <img alt="NumPy" src="https://img.shields.io/badge/NumPy-013243.svg?style=flat&logo=NumPy&logoColor=white">
  <img alt="Pytest" src="https://img.shields.io/badge/Pytest-0A9EDC.svg?style=flat&logo=Pytest&logoColor=white">
  <img alt="Python" src="https://img.shields.io/badge/Python-3776AB.svg?style=flat&logo=Python&logoColor=white">
  <img alt="SciPy" src="https://img.shields.io/badge/SciPy-8CAAE6.svg?style=flat&logo=SciPy&logoColor=white">
  <img alt="pandas" src="https://img.shields.io/badge/pandas-150458.svg?style=flat&logo=pandas&logoColor=white">
</div>

**Краткое описание:** Многопользовательский учебный проект на Python с использованием фреймворка Bottle. В проекте четыре участников, каждый реализует отдельный аналитический вариант. Цель проекта – на примере общей таблицы с данными (1–10 числовых столбцов, до 1000 строк) показать различные методы анализа: построение распределений и проверку нормальности, матрицу корреляций и тепловую карту, матрицу диаграмм рассеяния и графики, а также построение модели и прогнозирование.

## Участники и задачи

| Участник     | Вариант | Задача                                                                                                                                                |
| ------------ | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Безруких** | 1       | Построение распределений (гистограмм) для числовых переменных и проверка нормальности распределения (например, тестом Шапиро–Уилка или Q–Q графиком). |
| **Катаван**  | 2       | Вычисление матрицы корреляций между колонками и отображение её в виде тепловой карты.                                                                 |
| **Сапрыкин** | 3       | Построение матрицы рассеяния (scatter matrix) для визуального анализа взаимосвязей переменных и дополнительных диаграмм (гистограмм, box-plot).       |
| **Володин**  | 4       | Обучение модели линейной регрессии на данных и прогнозирование целевой переменной.                                                                    |

Каждый вариант реализован как отдельная страница веб-приложения Bottle. Пользователь может загружать или генерировать входные данные, выбирать интересующие его строки (например, по диапазону индексов) и видеть результаты анализа на соответствующей странице.

## Функциональность страниц

* **Страница Вариант 1 (Безруких):**  Пользователь задаёт выбор колонок или фильтрует строки таблицы. Система отображает гистограммы распределений для выбранных числовых переменных и выводит результаты теста на нормальность (например, p-value теста Шапиро–Уилка). Может быть предусмотрена визуализация Q–Q графиков.
* **Страница Вариант 2 (Катаван):**  На странице создаётся корреляционная матрица для всех числовых колонок. Результат выводится в табличном виде и в виде тепловой карты (heatmap) с цветовой шкалой.
* **Страница Вариант 3 (Сапрыкин):**  Для выбранных переменных строится **scatter matrix** (матрица диаграмм рассеяния) – совокупность диаграмм попарных зависимостей между переменными. Кроме того, могут быть представлены дополнительные графики (например, box-plot для распределений). Это помогает визуально оценивать корреляции и выбросы.
* **Страница Вариант 4 (Володин):**  Реализовано обучение простой модели линейной регрессии на предоставленных данных. Пользователь выбирает целевую колонку и параметры модели. После обучения отображаются прогноз. Можно предложить загрузку новых данных для прогнозирования.

Каждая страница содержит форму для загрузки/выбора данных и кнопку запуска анализа. Результаты выводятся на той же странице в виде графиков и кратких текстовых описаний (например, p-value теста или значение корреляции).

## Требования к окружению и установка

Проект написан на **Python 3.10** и требует установки следующих библиотек:

```bash
pip install bottle pandas numpy scipy matplotlib seaborn scikit-learn
```

* **Bottle** – лёгкий веб-фреймворк для создания страниц и обработки запросов.
* **Pandas, NumPy** – для работы с таблицами и числовыми данными.
* **Matplotlib, Seaborn** – для построения графиков (гистограмм, тепловых карт, диаграмм рассеяния).
* **SciPy** – для статистических тестов (проверка на нормальность).
* **scikit-learn** – для обучения модели и прогнозирования.

Рекомендуется создать виртуальное окружение `venv` и установить зависимости командой:

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## Запуск проекта

1. **Скачивание проекта с GitHub:** Склонируйте репозиторий с проектом на свой компьютер с помощью команды:

   ```bash
   git clone https://github.com/SapKat-BezVol/BottleWebProject_C222_C221K_7_BKSV.git
   ```

2. **Запуск сервера:** Перейдите в корневую папку проекта и выполните:

   ```bash
   python app.py
   ```

   По умолчанию приложение будет доступно по адресу `http://localhost:8080/` (порт можно настроить в коде).

3. **Ввод данных:** На каждой странице приложения есть форма для загрузки данных. Можно загрузить CSV-файл с данными (не более 10 столбцов, до 1000 строк). Пример формата CSV:

   ```csv
   col1,col2,col3
   1.23,4.56,7.89
   2.34,5.67,8.90
   ...
   ```

   Также может быть предусмотрена кнопка генерации случайных данных в указанном диапазоне (если реализовано в проекте).

4. **Навигация по страницам:** Главная страница (`/`) предлагает ссылки на четыре варианта анализа. Перейдите по нужной ссылке, загрузите данные и нажмите кнопку «Анализ» или «Построить график».

Пример запуска сервера:

```bash
Bottle v0.x.x server starting up (using WSGIRefServer())...
Listening on http://localhost:8080/
```

## Структура проекта

Проект организован следующими основными компонентами:

* `app.py` (или `main.py`) – главный файл приложения. В нём создаётся объект Bottle, настраиваются маршруты (routes) для каждой страницы и обработчики запросов.
* Папка `templates/` – содержит HTML-шаблоны для страниц (по одному на каждый вариант анализа). Шаблоны используют встроенный шаблонизатор Bottle (или Jinja2) и получают данные для отображения из обработчиков.
* Папка `static/` – содержит статические файлы (CSS, JavaScript, изображения), если они нужны для оформления страниц.
* Папка `data/` (опционально) – место для хранения исходных или тестовых CSV-файлов с данными.
* Папка `tests/` – содержит модуль(и) с юнит-тестами (Python-файлы с `unittest`).
* Папка `images/` – содержит изображения.

В файле `app.py` (или разделении на модули) описаны обработчики (`@route`) для каждого варианта:

```python
from bottle import Bottle, run, template, request
app = Bottle()

@app.route('/variant1', method=['GET','POST'])
def variant1():
    # код загрузки данных, анализ гистограмм и проверки нормальности
    return template('variant1.tpl', ...)
```

## Юнит-тесты

В проекте должны быть покрывающие тесты для основных функций (например, генерация данных, расчёт корреляции, обучение модели). Для запуска тестов используется стандартный модуль `unittest`.

Пример команды для запуска всех тестов:

```bash
python -m unittest discover tests
```

В тестах могут присутствовать фиктивные (mock) данные или небольшие CSV-файлы из папки `tests/data` для проверки результатов анализа (например, тест, что корреляция между столбцами правильно рассчитывается, или что модель обучается без ошибок).

## Входные данные

Проект ожидает на вход таблицу CSV с числовыми данными (1–10 столбцов, до 1000 строк). Данные можно:

* **Загрузить из файла:** В форме на каждой странице выбрать файл и нажать «Загрузить».
* **Сгенерировать автоматически:** Если в проекте предусмотрен скрипт генерации, возможно, на одной из страниц есть кнопка «Сгенерировать данные».

Пример таблицы:

```csv
feature1,feature2,feature3
5.1,3.5,1.4
4.9,3.0,1.4
...
```

После загрузки данных приложение сохраняет их в памяти (или во временный файл) и использует для дальнейшего анализа на всех страницах.

## Тестовые данные и проверка работы

Для проверки работы проекта можно использовать готовые примеры данных. Рекомендуется создать простой CSV (например, набор точек с линейной зависимостью или разные нормальные распределения) и убедиться, что:

* На Варианте 1 гистограммы корректно отображаются, и тест Шапиро–Уилка распознаёт или отвергает нормальность в соответствии с распределением.
* На Варианте 2 матрица корреляций верна (например, при независимых столбцах значения близки к 0).
* На Варианте 3 scatter matrix показывает ожидаемые паттерны (например, диагональ – гистограммы, а параллельные столбцы формируют прямые).
* На Варианте 4 модель выдаёт адекватные прогнозы (например, при линейной зависимости MSE близко к нулю).

Пример тестового CSV:

```csv
x,y,z
1,2,3
2,4,6
3,6,9
4,8,12
```

В таком случае `y` и `z` линейно зависят от `x`. Модель на Варианте 4 должна легко найти линейную зависимость (R^2 ≈ 1). Корреляции между `x`, `y`, `z` должны быть максимально близки к 1 на Варианте 2.

Проверка работы заключается в ручной загрузке таких данных на веб-страницах и анализе полученных графиков и метрик. Юнит-тесты автоматически проверяют отдельные функции на небольших наборах данных.
